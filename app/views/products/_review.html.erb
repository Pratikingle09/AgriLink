



<div class="rating-star">
<span class="fa fa-star rate fr"></span>
<span class="fa fa-star rate fr"></span>
<span class="fa fa-star rate fr"></span>
<span class="fa fa-star rate fr"></span>
<span class="fa fa-star rate fr"></span>
</div>
<div class="avg-rating">
<div style="line-height:2.3em"><%= render "show_review", rating: @average_rating %></div>
<h3 style="line-height:0.1em"><%= @average_rating %>/5.0</h3>
</div>


<div class="comm">
<%= form_with(model: [@product, @reviews], url: review_product_path(@product), local: true) do |form| %>
  <%= form.hidden_field :rating, value: 0, id: 'rating-value' %>
  <%= form.text_area :comment, placeholder: "Comment", class: "question-body input com-input",required: true  %>
  <%= form.submit 'Submit Rating',class:"com-btn" %>
<% end %>
</div>

<script>
    const stars = document.querySelectorAll('.fr');
    
    stars.forEach((star, index) => {
        star.addEventListener('click', () => {
            stars.forEach(s => s.classList.remove('checked'));
            
            for (let i = 0; i <= index; i++) {
                stars[i].classList.add('checked');
            }
    const checkedStars = document.querySelectorAll('.checked').length;
    document.getElementById("rating-value").value= checkedStars;
        });
    });

</script>